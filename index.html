<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>

  <script src="https://d3js.org/d3.v4.js"></script>
  
  
  <link rel="stylesheet" type="text/css" href="stylesheet.css">

<div class="tab">
  <button class="tablinks" onclick="opentab(event, 'first_scene')">1</button>
  <button class="tablinks" onclick="opentab(event, 'second_scene')">2</button>
  <button class="tablinks" onclick="opentab(event, 'third_scene')">3</button>
  <button class="tablinks" onclick="opentab(event, 'fourth_scene')">4</button>
  <button class="tablinks" onclick="opentab(event, 'final_scene')">5</button>

</div>




<div id="first_scene" class="tabcontent"></div>
<div id="fourth_scene" class="tabcontent"></div>
<div id="final_scene" class="tabcontent"></div>
<div id="second_scene" class="tabcontent"></div>
<div id="third_scene" class="tabcontent"></div>



<script id="first_scene">

                  var margin = {top: 20, right: 30, bottom: 100, left: 250},
                      width = 1500 - margin.left - margin.right,
                      height = 800 - 100 - 30;

                  // append the svg object to the body of the page
                  var svg = d3.select("#first_scene")
                    .append("svg")
                      .attr("width", width + margin.left + margin.right)
                      .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                      .attr("transform",
                            "translate(" + margin.left + "," + margin.top + ")");

                var svg_second = d3.select("#second_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

                var svg_third = d3.select("#third_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

                var svg_fourth = d3.select("#fourth_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

                var svg_final = d3.select("#final_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/milan-saroj/Narrative_Visualization/master/US_CASES_FINAL.csv",

                  // d3.csv("https://raw.githubusercontent.com/milan-saroj/Narrative_Visualization/master/US_cases__latest_after_march.csv",


                    function(d){
                      return { date : d3.timeParse("%m/%d/%Y")(d.date), US_cases : d.US_cases, US_death:d.US_death, NY_cases:d.NY_cases ,
                      NJ_cases :d.NJ_cases, Cali_cases :d.Cali_cases, Texas_cases:d.Texas_cases, Florida_cases:d.Florida_cases,
                      tx_flo_cali:d.tx_flo_cali,ny_nj:d.ny_nj, half_US:d.half_US , case_sum:d.case_sum}
                    },


        function(data) {


              var x = d3.scaleTime().domain([new Date("3/11/2020"), new Date("7/16/2020")]).range([ 0, width ]);
              var y = d3.scaleLinear().domain([0,4000000]).range([ height, 0 ]);


                  var line_US = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.US_cases) })
                      .curve(d3.curveMonotoneX);



                  var line_NY = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.NY_cases) })
                      .curve(d3.curveMonotoneX);

                  var line_NJ = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.NJ_cases) })
                      .curve(d3.curveMonotoneX);


                  var line_TX = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.Texas_cases) })
                      .curve(d3.curveMonotoneX);


                  var line_FL = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.Florida_cases) })
                      .curve(d3.curveMonotoneX);


                  var line_CA = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.Cali_cases) })
                      .curve(d3.curveMonotoneX);

                  var line_halfUS = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.half_US) })
                      .curve(d3.curveMonotoneX);

                  var line_Top5 = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.case_sum) })
                      .curve(d3.curveMonotoneX);

                  var line_NY_NJ = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return (y(d.ny_nj)) })
                      .curve(d3.curveMonotoneX);

                  var line_TX_FL_CA = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return (y(d.tx_flo_cali)) })
                      .curve(d3.curveMonotoneX);


                      //********************************first_scene********************************//

                                  svg.append("g").attr("transform", "translate(0," + height + ")")
                                     .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%m/%d")));
                                   svg.append("g")
                                     .call(d3.axisLeft(y).tickFormat(d3.format(".2s")));

                                // Add the line
                                svg.append('g').append("path")
                                  .datum(data)
                                  .attr("class", "line")
                                  .attr("d", line_US)
                                  .transition()
                                  .ease(d3.easeSin)
                                  .duration(4000)
                                  .style('stroke', "red")
                                  .attr('stroke-width', 5);



                                svg.append('text')
                                  .attr('y',20)
                                  .attr('x',430)
                                  .attr('class', 'title')
                                  .text('COVID-19 Cases in USA')

                                  svg.append('g').attr("transform", "translate("+width+",100)").append('text')
                                    .attr('y',-22)
                                    .attr('x',-150)
                                    .attr('class', 'legend_cases')
                                    .text('Cases in USA')
                                    .attr("transform",
                                          "rotate(-45)")
                                    .style('color','blue');

                                svg.append('text')
                                  .attr('y',-60)
                                  .attr('x',-330)
                                  .attr('class', 'title')
                                  .text('COVID-19 Cases')
                              		.style('font-size',18)
                                  .attr("transform",
                                        "rotate(-90)")
                                  .attr('text-anchor','middle')

                                  svg.append('text').attr('y',720)  .attr('x',650).attr('class', 'title').text('Date ( year:2020)').style('font-size',18)

                                                                      //annotation 1
                                                                        svg.append('g').append('circle')
                                                                               .attr('class', 'annotation_circle')
                                                                               .attr("cx", 20)
                                                                               .attr("cy",670);



                                                                         svg.append('g').append('line')
                                                                                .style("stroke", "#9dabab")
                                                                                .attr("x1", 20)
                                                                                .attr("y1", 670)
                                                                                .attr("x2", 40)
                                                                                .attr("y2", 600);


                                                                               svg.append('text')
                                                                                 .attr('y',560)
                                                                                 .attr('x',10)
                                                                                 .attr('class', 'annotation_text')
                                                                                 .text('March 13,2020')

                                                                                   svg.append('text')
                                                                                     .attr('y',575)
                                                                                     .attr('x',10)
                                                                                     .attr('class', 'title')
                                                                                     .text('POTUS declare')
                                                                                    .attr('class', 'annotation_text')
                                                                                       svg.append('text')
                                                                                         .attr('y',590)
                                                                                         .attr('x',10)
                                                                                         .attr('class', 'title')
                                                                                         .text('National Emergency')
                                                                                        .attr('class', 'annotation_text')


















                                                                                   svg.append('g').append('circle')
                                                                                           .attr('class', 'annotation_circle')
                                                                                          .attr("cx", 120)
                                                                                          .attr("cy", 662);

                                                                                          svg.append('g').append('line')
                                                                                                 .style("stroke", "#9dabab")
                                                                                                 .attr("x1", 120)
                                                                                                 .attr("y1", 662)
                                                                                                 .attr("x2", 160)
                                                                                                 .attr("y2", 600);


                                                                                                svg.append('text')
                                                                                                  .attr('y',560)
                                                                                                  .attr('x',140)
                                                                                                  .attr('class', 'annotation_text')
                                                                                                  .text('March 23,2020')

                                                                                                    svg.append('text')
                                                                                                      .attr('y',575)
                                                                                                      .attr('x',140)
                                                                                                      .attr('class', 'title')
                                                                                                      .text('Stock Market hit')
                                                                                                     .attr('class', 'annotation_text')
                                                                                                        svg.append('text')
                                                                                                          .attr('y',590)
                                                                                                          .attr('x',140)
                                                                                                          .attr('class', 'title')
                                                                                                          .text('3-year low')
                                                                                                         .attr('class', 'annotation_text')








                                                                                          svg.append('g').append('circle')
                                                                                                 .attr('class', 'annotation_circle')
                                                                                                 .attr("cx", 290)
                                                                                                 .attr("cy", 585)

                                                                                                 svg.append('g').append('line')
                                                                                                        .style("stroke", "#9dabab")
                                                                                                        .attr("x1", 290)
                                                                                                        .attr("y1", 585)
                                                                                                        .attr("x2", 320)
                                                                                                        .attr("y2", 520);


                                                                                                       svg.append('text')
                                                                                                         .attr('y',465)
                                                                                                         .attr('x',300)
                                                                                                         .attr('class', 'annotation_text')
                                                                                                         .text('April 11,2020')

                                                                                                           svg.append('text')
                                                                                                           .attr('y',480)
                                                                                                           .attr('x',300)
                                                                                                             .attr('class', 'title')
                                                                                                             .text('Major disaster declaration')
                                                                                                            .attr('class', 'annotation_text')
                                                                                                               svg.append('text')
                                                                                                               .attr('y',495)
                                                                                                               .attr('x',300)
                                                                                                                 .attr('class', 'title')
                                                                                                                 .text('in all 50 States')
                                                                                                                .attr('class', 'annotation_text')
                                                                                                                svg.append('text')
                                                                                                                .attr('y',510)
                                                                                                                .attr('x',300)
                                                                                                                  .attr('class', 'title')
                                                                                                                  .text('(First time in US History)')
                                                                                                                 .attr('class', 'annotation_text')





                                                                                                 svg.append('g').append('circle')
                                                                                                       .attr('class', 'annotation_circle')
                                                                                                        .attr("cx", 720)
                                                                                                        .attr("cy", 390)

                                                                                                        svg.append('g').append('line')
                                                                                                               .style("stroke", "#9dabab")
                                                                                                               .attr("x1", 720)
                                                                                                               .attr("y1", 390)
                                                                                                               .attr("x2", 680)
                                                                                                               .attr("y2", 330);

                                                                                                            var x4 =  svg.append('text')
                                                                                                                .attr('y',275)
                                                                                                                .attr('x',620)
                                                                                                                .attr('class', 'annotation_text')
                                                                                                                .text('May 26,2020');

                                                                                                                  svg.append('text')
                                                                                                                  .attr('y',290)
                                                                                                                  .attr('x',620)
                                                                                                                    .attr('class', 'title')
                                                                                                                    .text('Beginning of Protest')
                                                                                                                   .attr('class', 'annotation_text')
                                                                                                                      svg.append('text')
                                                                                                                      .attr('y',305)
                                                                                                                      .attr('x',620)
                                                                                                                        .attr('class', 'title')
                                                                                                                        .text('over the death of ')
                                                                                                                       .attr('class', 'annotation_text')
                                                                                                                       svg.append('text')
                                                                                                                       .attr('y',320)
                                                                                                                       .attr('x',620)
                                                                                                                         .attr('class', 'title')
                                                                                                                         .text('George Floyd')
                                                                                                                        .attr('class', 'annotation_text')


                                                                                                        svg.append('g').append('circle')
                                                                                                             .attr('class', 'annotation_circle')
                                                                                                               .attr("cx", 760)
                                                                                                               .attr("cy", 376)

                                                                                                               svg.append('g').append('line')
                                                                                                                      .style("stroke", "#9dabab")
                                                                                                                      .attr("x1", 760)
                                                                                                                      .attr("y1", 376)
                                                                                                                      .attr("x2", 780)
                                                                                                                      .attr("y2", 295);


                                                                                                                      svg.append('text')
                                                                                                                        .attr('y',240)
                                                                                                                        .attr('x',780)
                                                                                                                        .attr('class', 'annotation_text')
                                                                                                                        .text('May 31,2020')

                                                                                                                          svg.append('text')
                                                                                                                          .attr('y',255)
                                                                                                                          .attr('x',780)
                                                                                                                            .attr('class', 'title')
                                                                                                                            .text('Memorial Day:')
                                                                                                                           .attr('class', 'annotation_text')
                                                                                                                              svg.append('text')
                                                                                                                              .attr('y',270)
                                                                                                                              .attr('x',780)
                                                                                                                                .attr('class', 'title')
                                                                                                                                .text('Virus hospitalizations rise')
                                                                                                                               .attr('class', 'annotation_text')
                                                                                                                               svg.append('text')
                                                                                                                               .attr('y',285)
                                                                                                                               .attr('x',780)
                                                                                                                                 .attr('class', 'title')
                                                                                                                                 .text('sharply after holiday')
                                                                                                                                .attr('class', 'annotation_text')









                                     //********************************second_scene********************************//

                                     var x1 = d3.scaleTime().domain([new Date("3/11/2020"), new Date("7/16/2020")]).range([ 0, width ]);
                                     var y1 = d3.scaleLinear().domain([0,500000]).range([ height, 0 ]);

                                     var line_NY_2= d3.line()
                                       .x(function(d) { return x1(d.date) })
                                       .y(function(d) { return y1(d.NY_cases) })
                                         .curve(d3.curveMonotoneX);

                                     var line_NJ_2 = d3.line()
                                       .x(function(d) { return x1(d.date) })
                                       .y(function(d) { return y1(d.NJ_cases) })
                                         .curve(d3.curveMonotoneX);

       /*axis*/               svg_second.append("g").attr("transform", "translate(0," + height + ")")
                                .call(d3.axisBottom(x1).tickFormat(d3.timeFormat("%m/%d")));
                              svg_second.append("g")
                                .call(d3.axisLeft(y1).tickFormat(d3.format(".2s")));




                                     svg_second.append('text')
                                       .attr('y',20)
                                       .attr('x',330)
                                       .attr('class', 'title')
                                       .text('COVID-19 Cases in New York and New Jersey')

                                       svg_second.append('text').attr('y',720)  .attr('x',650).attr('class', 'title').text('Date ( year:2020)').style('font-size',18)

                                     svg_second.append('text')
                                       .attr('y',-60)
                                       .attr('x',-330)
                                       .attr('class', 'title')
                                       .text('COVID-19 Cases')
                                       .style('font-size',18)
                                       .attr("transform",
                                             "rotate(-90)")
                                       .attr('text-anchor','middle')

                                       svg_second.append('g')
                                         .append("path")
                                         .datum(data)
                                         .attr("class", "line")
                                         .style('stroke', "#7ed5de")
                                         .attr("d", line_NY_2)


                                         svg_second.append('g')
                                           .append("path")
                                           .datum(data)
                                           .attr("class", "line")
                                           .style('stroke', "#7edea1")
                                           .attr("d", line_NJ_2)


                                           svg_second.append('g').attr("transform", "translate("+width+",100)").append('text')
                                             .attr('y',20)
                                             .attr('x',-150)
                                             .attr('class', 'legend_cases')
                                             .text('New York')
                                             .attr("transform",
                                                   "rotate(-5)")


                                             svg_second.append('g').attr("transform", "translate("+width+",100)").append('text')
                                               .attr('y',330)
                                               .attr('x',-150)
                                               .attr('class', 'legend_cases')
                                               .text('New Jersey')
                                               .attr("transform",
                                                     "rotate(-2)")


                                       svg_second.append('g').append('line')
                                              .style("stroke", "#9dabab")
                                              .style("stroke-width", 1)
                                              .attr("x1", 500)
                                              .attr("y1", 246)
                                              .attr("x2", 600)
                                              .attr("y2", 340);

                                              svg_second.append('g').append('line')
                                                     .style("stroke", "#9dabab")
                                                     .style("stroke-width", 1)
                                                     .attr("x1", 500)
                                                     .attr("y1", 505)
                                                     .attr("x2", 600)
                                                     .attr("y2", 370);



                                          svg_second.append('g').append('circle')
                                                 .style("fill", "#9dabab")
                                                 .style("stroke-width", 1)
                                                 .attr("cx", 500)
                                                 .attr("cy", 246)
                                                 .attr("r", 4);
                                                 svg_second.append('g').append('circle')
                                                        .style("fill", "#9dabab")
                                                        .style("stroke-width", 1)
                                                        .attr("cx", 500)
                                                        .attr("cy", 505)
                                                        .attr("r", 4);


                                             svg_second.append('text')
                                               .attr('y',360)
                                               .attr('x',600)
                                               .attr('class', 'title')
                                               .text('Curve started to flatten for both NY and NJ')
                                               .style('font-size',18)
                                                 .style("fill", "#9dabab")
                                                 svg_second.append('text')
                                                   .attr('y',380)
                                                   .attr('x',605)
                                                   .attr('class', 'title')
                                                   .text('from the first week of May')
                                                   .style('font-size',18)
                                                     .style("fill", "#9dabab")



                                       //********************************third_scene********************************//


                                       // var x1 = d3.scaleTime().domain([new Date("1/21/2020"), new Date("7/16/2020")]).range([ 0, width ]);
                                       // var y1 = d3.scaleLinear().domain([0,500000]).range([ height, 0 ]);

                                       var line_TX_2= d3.line()
                                         .x(function(d) { return x1(d.date) })
                                         .y(function(d) { return y1(d.Texas_cases) })
                                           .curve(d3.curveMonotoneX);

                                       var line_FL_2 = d3.line()
                                         .x(function(d) { return x1(d.date) })
                                         .y(function(d) { return y1(d.Florida_cases) })
                                           .curve(d3.curveMonotoneX);

                                           var line_CA_2 = d3.line()
                                             .x(function(d) { return x1(d.date) })
                                             .y(function(d) { return y1(d.Cali_cases) })
                                               .curve(d3.curveMonotoneX);

              /*axis*/               svg_third.append("g").attr("transform", "translate(0," + height + ")")
                                      .call(d3.axisBottom(x1).tickFormat(d3.timeFormat("%m/%d")));
                                      svg_third.append("g")
                                      .call(d3.axisLeft(y1).tickFormat(d3.format(".2s")));


                                       svg_third.append('text')
                                         .attr('y',20)
                                         .attr('x',320)
                                         .attr('class', 'title')
                                         .text('Growing COVID-19 Cases in TX,FL, and CA ')

                                         svg_third.append('text').attr('y',720)  .attr('x',650).attr('class', 'title').text('Date ( year:2020)').style('font-size',18)

                                       svg_third.append('text')
                                         .attr('y',-60)
                                         .attr('x',-330)
                                         .attr('class', 'title')
                                         .text('COVID-19 Cases')
                                         .style('font-size',18)
                                         .attr("transform",
                                               "rotate(-90)")
                                         .attr('text-anchor','middle')

                                         svg_third.append('g')
                                           .append("path")
                                           .datum(data)
                                           .attr("class", "line")
                                           .style('stroke', "#e8a643")
                                           .attr("d", line_TX_2)


                                           svg_third.append('g')
                                             .append("path")
                                             .datum(data)
                                             .attr("class", "line")
                                             .style('stroke', "#e3e843")
                                             .attr("d", line_CA_2)


                                             svg_third.append('g')
                                               .append("path")
                                               .datum(data)
                                               .attr("class", "line")
                                               .style('stroke', "#1970d4")
                                               .attr("d", line_FL_2)


                                               svg_third.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                 .attr('y',250)
                                                 .attr('x',-500)
                                                 .attr('class', 'legend_cases')
                                                 .text('California')
                                                 .attr("transform",
                                                       "rotate(-30)")


                                                 svg_third.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                 .attr('y',275)
                                                 .attr('x',-500)
                                                   .attr('class', 'legend_cases')
                                                   .text('Texas')
                                                   .attr("transform",
                                                         "rotate(-35)")

                                                         svg_third.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                         .attr('y',330)
                                                         .attr('x',-500)
                                                           .attr('class', 'legend_cases')
                                                           .text('Florida')
                                                           .attr("transform",
                                                                 "rotate(-35)")




                                                                        svg_third.append('g').append('line')
                                                                               .style("stroke", "#9dabab")
                                                                               .style("stroke-width", 1)
                                                                               .attr("x1", 880)
                                                                               .attr("y1", 460)
                                                                               .attr("x2", 800)
                                                                               .attr("y2", 380);



                                                                    svg_third.append('g').append('ellipse')
                                                                           .style("fill", "#becccc")
                                                                           .style("stroke-width", 25)
                                                                           .attr("cx", 900)
                                                                           .attr("cy", 520)
                                                                           .attr("rx", 50).attr("ry", 80).attr("opacity",0.5);


                                                                           svg_third.append('g').append('circle')
                                                                                  .style("fill", "#9dabab")
                                                                                  .style("stroke-width", 1)
                                                                                  .attr("cx", 880)
                                                                                  .attr("cy", 460)
                                                                                  .attr("r", 4);


                                                                       svg_third.append('text')
                                                                         .attr('y',360)
                                                                         .attr('x',600)
                                                                         .attr('class', 'title')
                                                                         .text('Curve started to grow exponentially for TX, CA, FL')
                                                                         .style('font-size',18)
                                                                           .style("fill", "#9dabab")

                                                                           svg_third.append('text')
                                                                             .attr('y',380)
                                                                             .attr('x',605)
                                                                             .attr('class', 'title')
                                                                             .text('from the middle of June')
                                                                             .style('font-size',18)
                                                                               .style("fill", "#9dabab")





                        //********************************fourth_scene********************************//


                           svg_fourth.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x).tickFormat(d3.timeFormat("%m/%d")));
                           svg_fourth.append("g").call(d3.axisLeft(y).tickFormat(d3.format(".2s")));

                           svg_fourth.append('g').append("path").datum(data).attr("class", "line").attr("d", line_US).transition().ease(d3.easeSin).duration(4000).style('stroke', "red").attr('stroke-width', 5);
                           svg_fourth.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#736c72").attr("d", line_Top5)
                           svg_fourth.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#e8bc43").attr("d", line_TX_FL_CA)
                           svg_fourth.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#5e8c86").attr("d", line_NY_NJ)

                            svg_fourth.append('text').attr('y',720)  .attr('x',650).attr('class', 'title').text('Date ( year:2020)').style('font-size',18)
                            svg_fourth.append('text').attr('y',20).attr('x',150).attr('class', 'title').text('How States with top 5 cases contributing total US Cases?')
                            svg_fourth.append('text').attr('y',-60).attr('x',-330).attr('class', 'title').text('COVID-19 Cases').style('font-size',18).attr("transform","rotate(-90)").attr('text-anchor','middle')
                            svg_fourth.append('g').attr("transform", "translate("+width+",100)").append('text').attr('y',-22).attr('x',-150).attr('class', 'legend_cases').text('Cases in USA').attr("transform","rotate(-45)")
                            svg_fourth.append('g').attr("transform", "translate("+width+",0)").append('text').attr('y',355).attr('x',-370).attr('class', 'legend_cases').text('Top 5 States Combined').attr("transform","rotate(-27)")
                            svg_fourth.append('g').attr("transform", "translate("+width+",0)").append('text').attr('y',568).attr('x',-370).attr('class', 'legend_cases').text('NY and NJ Combined').attr("transform","rotate(-1)")
                            svg_fourth.append('g').attr("transform", "translate("+width+",0)").append('text').attr('y',450).attr('x',-380).attr('class', 'legend_cases').text('TX,CA,FL Combined').attr("transform","rotate(-25)")


                              .attr('text-anchor','middle')

                            svg_fourth.append('text')
                              .attr('y',460)
                              .attr('x',100)
                              .attr('class', 'title')
                              .text('NY and NJ contributed the initial rise ')
                              .style('font-size',15)
                                .style("fill", "#9dabab")
                                svg_fourth.append('text')
                                .attr('y',478)
                                .attr('x',100)
                                  .attr('class', 'title')
                                  .text('of US total COVID-19 cases')
                                  .style('font-size',15)
                                    .style("fill", "#9dabab")


                                    svg_fourth.append('g').append('ellipse')
                                           .style("fill", "#becccc")
                                           .style("stroke-width", 25)
                                           .attr("cx", 350)
                                           .attr("cy", 600)
                                           .attr("rx",130).attr("ry", 50).attr("opacity",0.5);

                                           svg_fourth.append('g').append('line')
                                                  .style("stroke", "#9dabab")
                                                  .style("stroke-width", 1)
                                                  .attr("x1", 300)
                                                  .attr("y1", 485)
                                                  .attr("x2", 300)
                                                  .attr("y2", 570);

                                                  svg_fourth.append('g').append('circle')
                                                         .style("fill", "#9dabab")
                                                         .style("stroke-width", 1)
                                                         .attr("cx", 300)
                                                         .attr("cy", 570)
                                                         .attr("r", 4);


                                                         svg_fourth.append('g').attr("transform", "translate(1150,540)").append('ellipse')
                                                                .style("fill", "#becccc")
                                                                .style("stroke-width", 25)
                                                                .attr("cx", 0)
                                                                .attr("cy", 0)
                                                                .attr("rx",70).attr("ry",30).attr("opacity",0.5).attr("transform","rotate(-25)");

                                                                svg_fourth.append('g').append('line')
                                                                       .style("stroke", "#9dabab")
                                                                       .style("stroke-width", 1)
                                                                       .attr("x1", 1150)
                                                                       .attr("y1", 560)
                                                                       .attr("x2", 1150)
                                                                       .attr("y2", 620);

                                                                       svg_fourth.append('g').append('circle')
                                                                              .style("fill", "#9dabab")
                                                                              .style("stroke-width", 1)
                                                                              .attr("cx", 1150)
                                                                              .attr("cy", 560)
                                                                              .attr("r", 4);

                                                                              svg_fourth.append('text')
                                                                                .attr('y',630)
                                                                                .attr('x',950)
                                                                                .attr('class', 'title')
                                                                                .text('TX,FL,CA contributing recent rise ')
                                                                                .style('font-size',15)
                                                                                  .style("fill", "#9dabab")
                                                                                  svg_fourth.append('text')
                                                                                  .attr('y',650)
                                                                                  .attr('x',950)
                                                                                    .attr('class', 'title')
                                                                                    .text('of US total COVID-19 cases')
                                                                                    .style('font-size',15)
                                                                                      .style("fill", "#9dabab")




                                                                                             svg_fourth.append('g').append('line')
                                                                                                    .style("stroke", "#9dabab")
                                                                                                    .style("stroke-width", 1)
                                                                                                    .attr("x1", 850)
                                                                                                    .attr("y1", 460)
                                                                                                    .attr("x2", 950)
                                                                                                    .attr("y2", 515);

                                                                                                    svg_fourth.append('g').append('circle')
                                                                                                           .style("fill", "#9dabab")
                                                                                                           .style("stroke-width", 1)
                                                                                                           .attr("cx", 950)
                                                                                                           .attr("cy", 515)
                                                                                                           .attr("r", 4);

                                                                                                           svg_fourth.append('text')
                                                                                                             .attr('y',430)
                                                                                                             .attr('x',750)
                                                                                                             .attr('class', 'title')
                                                                                                             .text('TX,FL,CA,NY,NJ (Top 5 States) ')
                                                                                                             .style('font-size',15)
                                                                                                               .style("fill", "#9dabab")
                                                                                                               svg_fourth.append('text')
                                                                                                               .attr('y',450)
                                                                                                               .attr('x',750)
                                                                                                                 .attr('class', 'title')
                                                                                                                 .text('contributing almost half of the Total US cases')
                                                                                                                 .style('font-size',15)
                                                                                                                   .style("fill", "#9dabab")



  //********************************final_scene********************************//


                       svg_final.append("g").attr("transform", "translate(0," + height + ")")
                          .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%m/%d")));



                        svg_final.append("g")
                          .call(d3.axisLeft(y).tickFormat(d3.format(".2s")));

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "red").attr("d", line_US).attr('id','USA')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#USlegend').style('font-size',25);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","red"); d3.select('#USlegend').style('font-size',15);})
                            .on("click",function(d){
                              var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                var active2   = NJ.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                  var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                    var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                      var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                        var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                          var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                            var active8   = NY.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                      d3.select("#Texas").style("opacity", newOpacity1);
                        d3.select("#TXlegend").style("opacity", newOpacity1);
                          TX_dot.style("opacity", newOpacity1);
                      d3.select("#NJ").style("opacity", newOpacity2);
                        d3.select("#NJlegend").style("opacity", newOpacity3);
                          NJ_dot.style("opacity", newOpacity2);
                      d3.select("#CA").style("opacity", newOpacity3);
                        d3.select("#CAlegend").style("opacity", newOpacity3);
                          CA_dot.style("opacity", newOpacity3);
                      d3.select("#FL").style("opacity", newOpacity4);
                        d3.select("#FLlegend").style("opacity", newOpacity4);
                          FL_dot.style("opacity", newOpacity4);
                      d3.select("#Top5").style("opacity", newOpacity5);
                        d3.select("#Top5legend").style("opacity", newOpacity5);
                          Top5_dot.style("opacity", newOpacity5);
                      d3.select("#TXFLCA").style("opacity", newOpacity6);
                        d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                          TXFLCA_dot.style("opacity", newOpacity6);
                      d3.select("#NYNJ").style("opacity", newOpacity7);
                        d3.select("#NYNJlegend").style("opacity", newOpacity7);
                          NYNJ_dot.style("opacity", newOpacity7);
                      d3.select("#NY").style("opacity", newOpacity8)
                        NY_dot.style("opacity", newOpacity8);
                        d3.select("#NYlegend").style("opacity", newOpacity8);

                      Texas.active1 = active1;
                      NJ.active2 = active2;
                      CA.active3 = active3;
                      FL.active4 = active4;
                      Top5.active5 = active5;
                      TXFLCA.active6 = active6;
                      NYNJ.active7 = active7,
                      USA.active8 = active8;
  });

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#7ed5de").attr("d", line_NY).attr('id','NY')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#NYlegend').style('font-size',25);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","#7ed5de"); d3.select('#NYlegend').style('font-size',15);})
                                    .on("click",function(d){
                                    var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NJ.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#Texas").style("opacity", newOpacity1);
                              d3.select("#TXlegend").style("opacity", newOpacity1);
                                TX_dot.style("opacity", newOpacity1);
                            d3.select("#NJ").style("opacity", newOpacity2);
                              d3.select("#NJlegend").style("opacity", newOpacity3);
                                NJ_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);
                              d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                              d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                              d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                              d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                              d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                              d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                              d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                              d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                              d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                              d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);

                            Texas.active1 = active1;
                            NJ.active2 = active2;
                            CA.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;
                            });


                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#7edea1").attr("d", line_NJ).attr('id','NJ')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#NJlegend').style('font-size',25);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","#7edea1"); d3.select('#NJlegend').style('font-size',15);})
                                    .on("click",function(d){
                                    var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#Texas").style("opacity", newOpacity1);
                              d3.select("#TXlegend").style("opacity", newOpacity1);
                                TX_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);
                              d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                              d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                              d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                              d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                              d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                              d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                              d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                              d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                              d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                              d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);



                            Texas.active1 = active1;
                            NJ.active2 = active2;
                            CA.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;
                              });

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#e3e843").attr("d", line_CA).attr('id','CA')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#CAlegend').style('font-size',25);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","#e3e843"); d3.select('#CAlegend').style('font-size',15);})
                                                                .on("click",function(d){
                                    var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = NJ.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#Texas").style("opacity", newOpacity1);
                              d3.select("#TXlegend").style("opacity", newOpacity1);
                                TX_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity2);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#NJ").style("opacity", newOpacity3);
                              d3.select("#NJlegend").style("opacity", newOpacity3);
                                NJ_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);
                              d3.select('#an1').style("opacity", newOpacity8);
                              d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                              d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                              d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                              d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                              d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                              d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                              d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                              d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                              d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                              d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);



                            Texas.active1 = active1;
                            NY.active2 = active2;
                            NJ.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;

                              });

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#e8a643").attr("d", line_TX).attr('id','Texas')
                                       .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#TXlegend').style('font-size',25);})
                                                                .on("mouseout",function(d){d3.select(this).style("stroke","#e8a643"); d3.select('#TXlegend').style('font-size',15);})
                                                                .on("click",function(d){
                                    var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#NJ").style("opacity", newOpacity1);
                              d3.select("#NJlegend").style("opacity", newOpacity1);
                                NJ_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);
                              d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                              d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                              d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                              d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                              d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                              d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                              d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                              d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                              d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                              d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);



                            NJ.active1 = active1;
                            NY.active2 = active2;
                            CA.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;
                          });

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#1970d4").attr("d", line_FL).attr('id','FL')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#FLlegend').style('font-size',25);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","#1970d4"); d3.select('#FLlegend').style('font-size',15);})
                                                                .on("click",function(d){
                                    var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#NJ").style("opacity", newOpacity1);
                              d3.select("#NJlegend").style("opacity", newOpacity1);
                                NJ_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#Texas").style("opacity", newOpacity4);
                              d3.select("#TXlegend").style("opacity", newOpacity4);
                                TX_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);
                              d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                              d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                              d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                              d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                              d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                              d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                              d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                              d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                              d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                              d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);



                            NJ.active1 = active1;
                            NY.active2 = active2;
                            CA.active3 = active3;
                            Texas.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;
                            });

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#736c72").attr("d", line_Top5).attr('id','Top5')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#Top5legend').style('font-size',20);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","#736c72"); d3.select('#Top5legend').style('font-size',15);})
                                                                .on("click",function(d){
                                    var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = FL.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#NJ").style("opacity", newOpacity1);
                              d3.select("#NJlegend").style("opacity", newOpacity1);
                                NJ_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#Texas").style("opacity", newOpacity4);
                              d3.select("#TXlegend").style("opacity", newOpacity4);
                                TX_dot.style("opacity", newOpacity4);
                            d3.select("#FL").style("opacity", newOpacity5);
                              d3.select("#FLlegend").style("opacity", newOpacity5);
                                FL_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);
                              d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                              d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                              d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                              d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                              d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                              d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                              d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                              d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                              d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                              d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);



                            NJ.active1 = active1;
                            NY.active2 = active2;
                            CA.active3 = active3;
                            Texas.active4 = active4;
                            FL.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;
                            });


                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#e8bc43").attr("d", line_TX_FL_CA).attr('id','TXFLCA')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#TXFLCAlegend').style('font-size',20);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","#e8bc43"); d3.select('#TXFLCAlegend').style('font-size',15);})
                                                                .on("click",function(d){
                              var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                  var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                    var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                      var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                        var active6   = FL.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                          var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                            var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                      d3.select("#NJ").style("opacity", newOpacity1);
                        d3.select("#NJlegend").style("opacity", newOpacity1);
                          NJ_dot.style("opacity", newOpacity1);
                      d3.select("#NY").style("opacity", newOpacity2);
                        d3.select("#NYlegend").style("opacity", newOpacity3);
                          NY_dot.style("opacity", newOpacity2);
                      d3.select("#CA").style("opacity", newOpacity3);
                        d3.select("#CAlegend").style("opacity", newOpacity3);
                          CA_dot.style("opacity", newOpacity3);
                      d3.select("#Texas").style("opacity", newOpacity4);
                        d3.select("#TXlegend").style("opacity", newOpacity4);
                          TX_dot.style("opacity", newOpacity4);
                      d3.select("#Top5").style("opacity", newOpacity5);
                        d3.select("#Top5legend").style("opacity", newOpacity5);
                          Top5_dot.style("opacity", newOpacity5);
                      d3.select("#FL").style("opacity", newOpacity6);
                        d3.select("#FLlegend").style("opacity", newOpacity6);
                          FL_dot.style("opacity", newOpacity6);
                      d3.select("#NYNJ").style("opacity", newOpacity7);
                        d3.select("#NYNJlegend").style("opacity", newOpacity7);
                          NYNJ_dot.style("opacity", newOpacity7);
                      d3.select("#USA").style("opacity", newOpacity8)
                        US_dot.style("opacity", newOpacity8);
                        d3.select("#USlegend").style("opacity", newOpacity8);
                        d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                        d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                        d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                        d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                        d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                        d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                        d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                        d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                        d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                        d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);



                      NJ.active1 = active1;
                      NY.active2 = active2;
                      CA.active3 = active3;
                      Texas.active4 = active4;
                      Top5.active5 = active5;
                      FL.active6 = active6;
                      NYNJ.active7 = active7,
                      USA.active8 = active8;
                        });


                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#5e8c86").attr("d", line_NY_NJ).attr('id','NYNJ')
                            .on("mouseover",function(d){d3.select(this).style("stroke","blue"); d3.select('#NYNJlegend').style('font-size',20);})
                                                     .on("mouseout",function(d){d3.select(this).style("stroke","#5e8c86"); d3.select('#NYNJlegend').style('font-size',15);})
                                                                .on("click",function(d){
                                var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                  var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                    var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                      var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                        var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                          var active7   = FL.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                            var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                      d3.select("#NJ").style("opacity", newOpacity1);
                        d3.select("#NJlegend").style("opacity", newOpacity1);
                          NJ_dot.style("opacity", newOpacity1);
                      d3.select("#NY").style("opacity", newOpacity2);
                        d3.select("#NYlegend").style("opacity", newOpacity3);
                          NY_dot.style("opacity", newOpacity2);
                      d3.select("#CA").style("opacity", newOpacity3);
                        d3.select("#CAlegend").style("opacity", newOpacity3);
                          CA_dot.style("opacity", newOpacity3);
                      d3.select("#Texas").style("opacity", newOpacity4);
                        d3.select("#TXlegend").style("opacity", newOpacity4);
                          TX_dot.style("opacity", newOpacity4);
                      d3.select("#Top5").style("opacity", newOpacity5);
                        d3.select("#Top5legend").style("opacity", newOpacity5);
                          Top5_dot.style("opacity", newOpacity5);
                      d3.select("#TXFLCA").style("opacity", newOpacity6);
                        d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                          TXFLCA_dot.style("opacity", newOpacity6);
                      d3.select("#FL").style("opacity", newOpacity7);
                        d3.select("#FLlegend").style("opacity", newOpacity7);
                          FL_dot.style("opacity", newOpacity7);
                      d3.select("#USA").style("opacity", newOpacity8)
                        US_dot.style("opacity", newOpacity8);
                        d3.select("#USlegend").style("opacity", newOpacity8);
                        d3.select("#an1").style("opacity", newOpacity8);d3.select("#an2").style("opacity", newOpacity8);d3.select("#an3").style("opacity", newOpacity8);
                        d3.select("#an4").style("opacity", newOpacity8);d3.select("#an5").style("opacity", newOpacity8);d3.select("#an6").style("opacity", newOpacity8);
                        d3.select("#an7").style("opacity", newOpacity8);d3.select("#an8").style("opacity", newOpacity8);d3.select("#an9").style("opacity", newOpacity8);
                        d3.select("#an10").style("opacity", newOpacity8);d3.select("#an11").style("opacity", newOpacity8);d3.select("#an12").style("opacity", newOpacity8);
                        d3.select("#an13").style("opacity", newOpacity8);d3.select("#an14").style("opacity", newOpacity8);d3.select("#an15").style("opacity", newOpacity8);
                        d3.select("#an16").style("opacity", newOpacity8);d3.select("#an17").style("opacity", newOpacity8);d3.select("#an18").style("opacity", newOpacity8);
                        d3.select("#an19").style("opacity", newOpacity8);d3.select("#an20").style("opacity", newOpacity8);d3.select("#an21").style("opacity", newOpacity8);
                        d3.select("#an22").style("opacity", newOpacity8);d3.select("#an23").style("opacity", newOpacity8);d3.select("#an24").style("opacity", newOpacity8);
                        d3.select("#an25").style("opacity", newOpacity8);d3.select("#an26").style("opacity", newOpacity8);d3.select("#an27").style("opacity", newOpacity8);
                        d3.select("#an28").style("opacity", newOpacity8);d3.select("#an29").style("opacity", newOpacity8);



                      NJ.active1 = active1;
                      NY.active2 = active2;
                      CA.active3 = active3;
                      Texas.active4 = active4;
                      Top5.active5 = active5;
                      FL.active6 = active6;
                      NYNJ.active7 = active7,
                      USA.active8 = active8;
                        });


                        function formatDate(date) {
                        var monthNames = [
                          "January", "February", "March",
                          "April", "May", "June", "July",
                          "August", "September", "October",
                          "November", "December"
                        ];

                        var day = date.getDate();
                        var monthIndex = date.getMonth();
                        var year = date.getFullYear();

                        return day + ' ' + monthNames[monthIndex];
                         // + ', ' + year;
                      }

                      function numberformat(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}


            var tooltip=  svg_final.append('g').append('text').attr('y', 200).attr('x', 300 ).attr('class', 'title').text('').style("opacity", 0).style('fill', 'red')

            var US_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.US_cases) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("US Cases: "+ numberformat(d.US_cases)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("US Cases: "+ numberformat(d.US_cases)+" on "+formatDate(d.date))})
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)})




           var TX_dot=  svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.Texas_cases) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("Texas: "+ numberformat(d.Texas_cases)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("Texas: "+ numberformat(d.Texas_cases)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var CA_dot = svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.Cali_cases) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("California Cases: "+ numberformat(d.Cali_cases)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("California Cases: "+ numberformat(d.Cali_cases)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var FL_dot = svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.Florida_cases) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("Florida Cases: "+ numberformat(d.Florida_cases)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("Florida Cases: "+ numberformat(d.Florida_cases)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var NY_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.NY_cases) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("New York Cases: "+ numberformat(d.NY_cases)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("New York Cases: "+ numberformat(d.NY_cases)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var NJ_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.NJ_cases) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("New Jersey Cases: "+ numberformat(d.NJ_cases)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("New Jersey Cases: "+ numberformat(d.NJ_cases)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var Top5_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.case_sum) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("Top 5 states cases: "+ numberformat(d.case_sum)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("Top 5 states cases: "+ numberformat(d.case_sum)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});

            var NYNJ_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.ny_nj) } )
            .attr("r",3).style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("NY and NJ Combined: "+ numberformat(d.ny_nj)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("NY and NJ Combined: "+ numberformat(d.ny_nj)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});

            var TXFLCA_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.tx_flo_cali) } )
            .attr("r",3)
            // .attr("class", "dotstates")
            .style("fill", "black").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("TX, FL , CA combined: "+ numberformat(d.tx_flo_cali)+" on "+formatDate(d.date))})
            .on("mousemove",function(d) {tooltip.text("TX, FL , CA combined: "+ numberformat(d.tx_flo_cali)+" on "+formatDate(d.date))} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});





                        svg_final.append('text')
                          .attr('y',20)
                          .attr('x',150)
                          .attr('class', 'title')
                          .text('COVID-19 Cases Comparison: US vs  5 States with highest cases')

                        svg_final.append('text')
                          .attr('y',-60)
                          .attr('x',-330)
                          .attr('class', 'title')
                          .text('COVID-19 Cases')
                          .style('font-size',18)
                          .attr("transform",
                                "rotate(-90)")
                          .attr('text-anchor','middle')


                          svg_final.append('text')
                            .attr('y',720)
                            .attr('x',650)
                            .attr('class', 'title')
                            .text('Date ( year:2020)')
                            .style('font-size',18)

                            .attr('text-anchor','middle')



                          svg_final.append('g').attr("transform", "translate("+width+",100)").append('text')
                            .attr('y',-22)
                            .attr('x',-150)
                            .attr('id','USlegend')
                            .attr('class', 'legend_cases')
                            .text('Cases in USA')
                            .attr("transform",
                                  "rotate(-45)")
                            .style('color','blue');

                            svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                            .attr('y',355)
                            .attr('x',-370).attr('id','Top5legend')
                              .attr('class', 'legend_cases')
                              .text('Top 5 States Combined')
                              .attr("transform",
                                    "rotate(-27)")


                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                              .attr('y',568)
                              .attr('x',-370).attr('id','NYNJlegend')
                                .attr('class', 'legend_cases')
                                .text('NY and NJ Combined')
                                .attr("transform",
                                      "rotate(-1)")

                                      svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                      .attr('y',450)
                                      .attr('x',-380).attr('id','TXFLCAlegend')
                                        .attr('class', 'legend_cases')
                                        .text('TX,CA,FL Combined')
                                        .attr("transform",
                                              "rotate(-25)")


                                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                              .attr('y',618)
                                              .attr('x',-200).attr('id','CAlegend')
                                                .attr('class', 'legend_cases')
                                                .text('CA')
                                                .attr("transform",
                                                      "rotate(-3)")

                                                      svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                      .attr('y',590)
                                                      .attr('x',-200).attr('id','NYlegend')
                                                        .attr('class', 'legend_cases')
                                                        .text('NY')
                                                        .attr("transform",
                                                              "rotate(-3)")

                                                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                              .attr('y',650)
                                                              .attr('x',-200).attr('id','FLlegend')
                                                                .attr('class', 'legend_cases')
                                                                .text('FL')
                                                                .attr("transform",
                                                                      "rotate(-3)")

                                                                      svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                                      .attr('y',635)
                                                                      .attr('x',-302).attr('id','TXlegend')
                                                                        .attr('class', 'legend_cases')
                                                                        .text('TX')
                                                                        .attr("transform",
                                                                              "rotate(-3)")






                                                                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                                              .attr('y',650)
                                                                              .attr('x',-50).attr('id','NJlegend')
                                                                                .attr('class', 'legend_cases')
                                                                                .text('NJ')
                                                                                .attr("transform",
                                                                                      "rotate(-3)");

                                                                                      svg_final.append('g').append('circle')
                                                                                              .attr('id','an1')
                                                                                             .attr('class', 'annotation_circle')
                                                                                             .attr("cx", 20)
                                                                                             .attr("cy",670);



                                                                                       svg_final.append('g').append('line')
                                                                                              .attr('id','an2')
                                                                                              .style("stroke", "#9dabab")
                                                                                              .attr("x1", 20)
                                                                                              .attr("y1", 670)
                                                                                              .attr("x2", 40)
                                                                                              .attr("y2", 600);


                                                                                             svg_final.append('text')
                                                                                             .attr('id','an3')
                                                                                               .attr('y',560)
                                                                                               .attr('x',10)
                                                                                               .attr('class', 'annotation_text')
                                                                                               .text('March 13,2020')

                                                                                                 svg_final.append('text')
                                                                                                 .attr('id','an4')
                                                                                                   .attr('y',575)
                                                                                                   .attr('x',10)
                                                                                                   .attr('class', 'title')
                                                                                                   .text('POTUS declare')
                                                                                                  .attr('class', 'annotation_text')
                                                                                                     svg_final.append('text')
                                                                                                     .attr('id','an5')
                                                                                                       .attr('y',590)
                                                                                                       .attr('x',10)
                                                                                                       .attr('class', 'title')
                                                                                                       .text('National Emergency')
                                                                                                      .attr('class', 'annotation_text')

                                                                                                      svg_final.append('g').append('circle').attr('id','an6')
                                                                                                              .attr('class', 'annotation_circle')
                                                                                                             .attr("cx", 120)
                                                                                                             .attr("cy", 662);

                                                                                                             svg_final.append('g').append('line').attr('id','an7')
                                                                                                                    .style("stroke", "#9dabab")
                                                                                                                    .attr("x1", 120)
                                                                                                                    .attr("y1", 662)
                                                                                                                    .attr("x2", 160)
                                                                                                                    .attr("y2", 600);


                                                                                                                svg_final.append('text').attr('id','an8')
                                                                                                                     .attr('y',560)
                                                                                                                     .attr('x',140)
                                                                                                                     .attr('class', 'annotation_text')
                                                                                                                     .text('March 23,2020')

                                                                                                                       svg_final.append('text').attr('id','an9')
                                                                                                                         .attr('y',575)
                                                                                                                         .attr('x',140)
                                                                                                                         .attr('class', 'title')
                                                                                                                         .text('Stock Market hit')
                                                                                                                        .attr('class', 'annotation_text')
                                                                                                                           svg_final.append('text').attr('id','an10')
                                                                                                                             .attr('y',590)
                                                                                                                             .attr('x',140)
                                                                                                                             .attr('class', 'title')
                                                                                                                             .text('3-year low')
                                                                                                                            .attr('class', 'annotation_text')








                                                                                                             svg_final.append('g').append('circle').attr('id','an11')
                                                                                                                    .attr('class', 'annotation_circle')
                                                                                                                    .attr("cx", 290)
                                                                                                                    .attr("cy", 585)

                                                                                                                    svg_final.append('g').append('line').attr('id','an12')
                                                                                                                           .style("stroke", "#9dabab")
                                                                                                                           .attr("x1", 290)
                                                                                                                           .attr("y1", 585)
                                                                                                                           .attr("x2", 320)
                                                                                                                           .attr("y2", 520);


                                                                                                                          svg_final.append('text').attr('id','an13')
                                                                                                                            .attr('y',465)
                                                                                                                            .attr('x',300)
                                                                                                                            .attr('class', 'annotation_text')
                                                                                                                            .text('April 11,2020')

                                                                                                                              svg_final.append('text').attr('id','an14')
                                                                                                                              .attr('y',480)
                                                                                                                              .attr('x',300)
                                                                                                                                .attr('class', 'title')
                                                                                                                                .text('Major disaster declaration')
                                                                                                                               .attr('class', 'annotation_text')
                                                                                                                                svg_final.append('text').attr('id','an15')
                                                                                                                                  .attr('y',495)
                                                                                                                                  .attr('x',300)
                                                                                                                                    .attr('class', 'title')
                                                                                                                                    .text('in all 50 States')
                                                                                                                                   .attr('class', 'annotation_text')
                                                                                                                                   svg_final.append('text').attr('id','an16')
                                                                                                                                   .attr('y',510)
                                                                                                                                   .attr('x',300)
                                                                                                                                     .attr('class', 'title')
                                                                                                                                     .text('(First time in US History)')
                                                                                                                                    .attr('class', 'annotation_text')





                                                                                                                    svg_final.append('g').append('circle').attr('id','an17')
                                                                                                                          .attr('class', 'annotation_circle')
                                                                                                                           .attr("cx", 720)
                                                                                                                           .attr("cy", 390)

                                                                                                                           svg_final.append('g').append('line').attr('id','an18')
                                                                                                                                  .style("stroke", "#9dabab")
                                                                                                                                  .attr("x1", 720)
                                                                                                                                  .attr("y1", 390)
                                                                                                                                  .attr("x2", 680)
                                                                                                                                  .attr("y2", 330);

                                                                                                                                svg_final.append('text').attr('id','an19')
                                                                                                                                   .attr('y',275)
                                                                                                                                   .attr('x',620)
                                                                                                                                   .attr('class', 'annotation_text')
                                                                                                                                   .text('May 26,2020');

                                                                                                                                     svg_final.append('text').attr('id','an20')
                                                                                                                                     .attr('y',290)
                                                                                                                                     .attr('x',620)
                                                                                                                                       .attr('class', 'title')
                                                                                                                                       .text('Beginning of Protest')
                                                                                                                                      .attr('class', 'annotation_text')
                                                                                                                                        svg_final.append('text').attr('id','an21')
                                                                                                                                         .attr('y',305)
                                                                                                                                         .attr('x',620)
                                                                                                                                           .attr('class', 'title')
                                                                                                                                           .text('over the death of ')
                                                                                                                                          .attr('class', 'annotation_text')
                                                                                                                                        svg_final.append('text').attr('id','an22')
                                                                                                                                          .attr('y',320)
                                                                                                                                          .attr('x',620)
                                                                                                                                            .attr('class', 'title')
                                                                                                                                            .text('George Floyd')
                                                                                                                                           .attr('class', 'annotation_text')


                                                                                                                           svg_final.append('g').append('circle').attr('id','an23')
                                                                                                                                .attr('class', 'annotation_circle')
                                                                                                                                  .attr("cx", 760)
                                                                                                                                  .attr("cy", 376)

                                                                                                                                  svg_final.append('g').append('line').attr('id','an24')
                                                                                                                                         .style("stroke", "#9dabab")
                                                                                                                                         .attr("x1", 760)
                                                                                                                                         .attr("y1", 376)
                                                                                                                                         .attr("x2", 780)
                                                                                                                                         .attr("y2", 295);


                                                                                                                                        svg_final.append('text').attr('id','an25')
                                                                                                                                          .attr('y',240)
                                                                                                                                          .attr('x',780)
                                                                                                                                          .attr('class', 'annotation_text')
                                                                                                                                          .text('May 31,2020')

                                                                                                                                            svg_final.append('text').attr('id','an26')
                                                                                                                                            .attr('y',255)
                                                                                                                                            .attr('x',780)
                                                                                                                                              .attr('class', 'title')
                                                                                                                                              .text('Memorial Day:')
                                                                                                                                             .attr('class', 'annotation_text').attr('id','an27')
                                                                                                                                                svg_final.append('text').attr('id','an29')
                                                                                                                                                .attr('y',270)
                                                                                                                                                .attr('x',780)
                                                                                                                                                  .attr('class', 'title')
                                                                                                                                                  .text('Virus hospitalizations rise')
                                                                                                                                                 .attr('class', 'annotation_text')
                                                                                                                                                 svg_final.append('text').attr('id','an28')
                                                                                                                                                 .attr('y',285)
                                                                                                                                                 .attr('x',780)
                                                                                                                                                   .attr('class', 'title')
                                                                                                                                                   .text('sharply after holiday')
                                                                                                                                                  .attr('class', 'annotation_text')































})
</script>

<script>
document.getElementById("first_scene").style.display = "block";
function opentab(evt, tabname) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabname).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>

</body>
</html>
