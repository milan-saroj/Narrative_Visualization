<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>

  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
  <!-- <script type="text/javascript" src="first_scene.js"></script> -->
  <link rel="stylesheet" type="text/css" href="stylesheet.css">

<div class="tab">
  <button class="tablinks" onclick="opentab(event, 'first_scene')">first_scene</button>
  <button class="tablinks" onclick="opentab(event, 'second_scene')">second_scene</button>
  <button class="tablinks" onclick="opentab(event, 'third_scene')">third_scene</button>
  <button class="tablinks" onclick="opentab(event, 'fourth_scene')">forth_scene</button>
  <button class="tablinks" onclick="opentab(event, 'final_scene')">final_scene</button>

</div>




<div id="first_scene" class="tabcontent"></div>
<div id="fourth_scene" class="tabcontent"></div>
<div id="final_scene" class="tabcontent"></div>
<div id="second_scene" class="tabcontent"></div>
<div id="third_scene" class="tabcontent"></div>



<script id="first_scene">

                  var margin = {top: 100, right: 30, bottom: 30, left: 250},
                      width = 1500 - margin.left - margin.right,
                      height = 800 - margin.top - margin.bottom;

                  // append the svg object to the body of the page
                  var svg = d3.select("#first_scene")
                    .append("svg")
                      .attr("width", width + margin.left + margin.right)
                      .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                      .attr("transform",
                            "translate(" + margin.left + "," + margin.top + ")");

                var svg_second = d3.select("#second_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

                var svg_third = d3.select("#third_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

                var svg_fourth = d3.select("#fourth_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");

                var svg_final = d3.select("#final_scene")
                  .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                    .attr("transform",
                          "translate(" + margin.left + "," + margin.top + ")");


                  d3.csv("https://raw.githubusercontent.com/milan-saroj/Narrative_Visualization/master/US_cases__latest_after_march.csv",


                    function(d){
                      return { date : d3.timeParse("%m/%d/%Y")(d.date), US_cases : d.US_cases, US_death:d.US_death, NY_cases:d.NY_cases ,
                      NJ_cases :d.NJ_cases, Cali_cases :d.Cali_cases, Texas_cases:d.Texas_cases, Florida_cases:d.Florida_cases,
                      tx_flo_cali:d.tx_flo_cali,ny_nj:d.ny_nj, half_US:d.half_US , case_sum:d.case_sum}
                    },


        function(data) {


              var x = d3.scaleTime().domain([new Date("3/11/2020"), new Date("7/16/2020")]).range([ 0, width ]);
              var y = d3.scaleLinear().domain([0,4000000]).range([ height, 0 ]);


                  var line_US = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.US_cases) })
                      .curve(d3.curveMonotoneX);



                  var line_NY = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.NY_cases) })
                      .curve(d3.curveMonotoneX);

                  var line_NJ = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.NJ_cases) })
                      .curve(d3.curveMonotoneX);


                  var line_TX = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.Texas_cases) })
                      .curve(d3.curveMonotoneX);


                  var line_FL = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.Florida_cases) })
                      .curve(d3.curveMonotoneX);


                  var line_CA = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.Cali_cases) })
                      .curve(d3.curveMonotoneX);

                  var line_halfUS = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.half_US) })
                      .curve(d3.curveMonotoneX);

                  var line_Top5 = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return y(d.case_sum) })
                      .curve(d3.curveMonotoneX);

                  var line_NY_NJ = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return (y(d.ny_nj)) })
                      .curve(d3.curveMonotoneX);

                  var line_TX_FL_CA = d3.line()
                    .x(function(d) { return x(d.date) })
                    .y(function(d) { return (y(d.tx_flo_cali)) })
                      .curve(d3.curveMonotoneX);


                      //********************************first_scene********************************//

                                  svg.append("g").attr("transform", "translate(0," + height + ")")
                                     .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%m/%d")));
                                   svg.append("g")
                                     .call(d3.axisLeft(y).tickFormat(d3.format(".2s")));

                                // Add the line
                                svg.append('g').append("path")
                                  .datum(data)
                                  .attr("class", "line")
                                  .attr("d", line_US)
                                  .transition()
                                  .ease(d3.easeSin)
                                  .duration(2000)
                                  .style('stroke', "red")
                                  .attr('stroke-width', 5);



                                svg.append('text')
                                  .attr('y',-20)
                                  .attr('x',430)
                                  .attr('class', 'title')
                                  .text('COVID-19 Cases in USA')

                                  svg.append('g').attr("transform", "translate("+width+",100)").append('text')
                                    .attr('y',-22)
                                    .attr('x',-150)
                                    .attr('class', 'legend_cases')
                                    .text('Cases in USA')
                                    .attr("transform",
                                          "rotate(-45)")
                                    .style('color','blue');

                                svg.append('text')
                                  .attr('y',-60)
                                  .attr('x',-330)
                                  .attr('class', 'title')
                                  .text('COVID-19 Cases')
                              		.style('font-size',18)
                                  .attr("transform",
                                        "rotate(-90)")
                                  .attr('text-anchor','middle')




                                  const annotations_US = [
                                {
                                note: {
                                  title:"March 13,2020",
                                  label: "POTUS declare National Emergency"
                                },
                                connector: {
                                  end: "dot",        // none, or arrow or dot
                                  type: "line",       // Line or curve
                                  points: 3,           // Number of break in the curve
                                  lineType : "horizontal"
                                },
                                color: ["#69b3a2"],
                                x: x(new Date("3/13/2020")),  // Takes the pixel number to convert to number
                                y:  y(2224),
                                dy: -100,
                                dx: -120
                              },
                              {
                              note: {
                                title:"April 11,2020",
                                label: "Major disaster declaration in all 50 states(first time in US history)"
                              },
                              connector: {
                                end: "dot",         // none, or arrow or dot
                                type: "line",       // Line or curve
                                points: 3,           // Number of break in the curve
                                lineType : "horizontal"
                              },
                              color: ["#69b3a2"],
                              x: x(new Date("4/13/2020")),  // Takes the pixel number to convert to number
                              y:  y(584018),
                              dy: -100,
                              dx: 20
                            },
                            {
                            note: {
                              title:"March 23,2020",
                              label: "Stock Market hit 3-year low"
                            },
                            connector: {
                              end: "dot",        // none, or arrow or dot
                              type: "line",       // Line or curve
                              points: 3,           // Number of break in the curve
                              lineType : "horizontal"
                            },

                            x: x(new Date("3/23/2020")),  // Takes the pixel number to convert to number
                            y:  y(43505),
                            dy: -100,
                            dx: -30
                            },
                            {
                            note: {
                              title:"May 26,2020",
                              label: "Beginning of Protest over death of George Floyd"
                            },
                            connector: {
                              end: "dot",        // none, or arrow or dot
                              type: "line",       // Line or curve
                              points: 3,           // Number of break in the curve
                              lineType : "horizontal"
                            },
                            x: x(new Date("5/26/2020")),  // Takes the pixel number to convert to number
                            y:  y(1689248),
                            dy: -100,
                            dx: -30
                            },
                            {
                            note: {
                              title:"May 31,2020",
                              label: "Memorial Day:Coronavirus hospitalizations rise sharply after Holiday"
                            },
                            connector: {
                              end: "dot",        // none, or arrow or dot
                              type: "line",       // Line or curve
                              points: 3,           // Number of break in the curve
                              lineType : "horizontal"
                            },
                            x: x(new Date("5/31/2020")),  // Takes the pixel number to convert to number
                            y:  y(1799035),
                            dy: -130,
                            dx: 80
                            },




                                ]

                                const makeAnnotations = d3.annotation()
                                     .type(d3.annotationLabel)
                                     .annotations(annotations_US)

                                   svg.append("g")
                                     .attr("class", "annotation-group")
                                     .call(makeAnnotations)


                                     //********************************second_scene********************************//

                                     var x1 = d3.scaleTime().domain([new Date("3/11/2020"), new Date("7/16/2020")]).range([ 0, width ]);
                                     var y1 = d3.scaleLinear().domain([0,500000]).range([ height, 0 ]);

                                     var line_NY_2= d3.line()
                                       .x(function(d) { return x1(d.date) })
                                       .y(function(d) { return y1(d.NY_cases) })
                                         .curve(d3.curveMonotoneX);

                                     var line_NJ_2 = d3.line()
                                       .x(function(d) { return x1(d.date) })
                                       .y(function(d) { return y1(d.NJ_cases) })
                                         .curve(d3.curveMonotoneX);

       /*axis*/               svg_second.append("g").attr("transform", "translate(0," + height + ")")
                                .call(d3.axisBottom(x1).tickFormat(d3.timeFormat("%m/%d")));
                              svg_second.append("g")
                                .call(d3.axisLeft(y1).tickFormat(d3.format(".2s")));




                                     svg_second.append('text')
                                       .attr('y',-20)
                                       .attr('x',430)
                                       .attr('class', 'title')
                                       .text('COVID-19 Cases in USA')

                                     svg_second.append('text')
                                       .attr('y',-60)
                                       .attr('x',-330)
                                       .attr('class', 'title')
                                       .text('COVID-19 Cases')
                                       .style('font-size',18)
                                       .attr("transform",
                                             "rotate(-90)")
                                       .attr('text-anchor','middle')

                                       svg_second.append('g')
                                         .append("path")
                                         .datum(data)
                                         .attr("class", "line")
                                         .style('stroke', "#7ed5de")
                                         .attr("d", line_NY_2)
                                         // .transition()
                                         // .ease(d3.easeSin)
                                         // .duration(4000)
                                         // .style('stroke', "green")
                                         // .attr('stroke-width', 5);

                                         svg_second.append('g')
                                           .append("path")
                                           .datum(data)
                                           .attr("class", "line")
                                           .style('stroke', "#7edea1")
                                           .attr("d", line_NJ_2)
                                           // .transition()
                                           // .ease(d3.easeSin)
                                           // .duration(4000)
                                           // .style('stroke', "green")
                                           // .attr('stroke-width', 5);

                                           svg_second.append('g').attr("transform", "translate("+width+",100)").append('text')
                                             .attr('y',20)
                                             .attr('x',-150)
                                             .attr('class', 'legend_cases')
                                             .text('New York')
                                             .attr("transform",
                                                   "rotate(-5)")


                                             svg_second.append('g').attr("transform", "translate("+width+",100)").append('text')
                                               .attr('y',330)
                                               .attr('x',-150)
                                               .attr('class', 'legend_cases')
                                               .text('New Jersey')
                                               .attr("transform",
                                                     "rotate(-2)")


                                           // svg_second.append('g')
                                           //   .append("path")
                                           //   .datum(data)
                                           //   .attr("class", "line")
                                           //   .attr("d", line_NY_NJ).transition()
                                           //   .ease(d3.easeSin)
                                           //   .duration(4000)
                                           //   .style('stroke', "cyan")
                                           //   .attr('stroke-width', 5);
                                       // const makeAnnotations = d3.annotation()
                                       //      .type(d3.annotationLabel)
                                       //      .annotations(annotations_US)
                                       //
                                       //    svg_second.append("g")
                                       //      .attr("class", "annotation-group")
                                       //      .call(makeAnnotations)


                                       //********************************third_scene********************************//


                                       // var x1 = d3.scaleTime().domain([new Date("1/21/2020"), new Date("7/16/2020")]).range([ 0, width ]);
                                       // var y1 = d3.scaleLinear().domain([0,500000]).range([ height, 0 ]);

                                       var line_TX_2= d3.line()
                                         .x(function(d) { return x1(d.date) })
                                         .y(function(d) { return y1(d.Texas_cases) })
                                           .curve(d3.curveMonotoneX);

                                       var line_FL_2 = d3.line()
                                         .x(function(d) { return x1(d.date) })
                                         .y(function(d) { return y1(d.Florida_cases) })
                                           .curve(d3.curveMonotoneX);

                                           var line_CA_2 = d3.line()
                                             .x(function(d) { return x1(d.date) })
                                             .y(function(d) { return y1(d.Cali_cases) })
                                               .curve(d3.curveMonotoneX);

              /*axis*/               svg_third.append("g").attr("transform", "translate(0," + height + ")")
                                      .call(d3.axisBottom(x1).tickFormat(d3.timeFormat("%m/%d")));
                                      svg_third.append("g")
                                      .call(d3.axisLeft(y1).tickFormat(d3.format(".2s")));


                                       svg_third.append('text')
                                         .attr('y',-20)
                                         .attr('x',430)
                                         .attr('class', 'title')
                                         .text('COVID-19 Cases in USA')

                                       svg_third.append('text')
                                         .attr('y',-60)
                                         .attr('x',-330)
                                         .attr('class', 'title')
                                         .text('COVID-19 Cases')
                                         .style('font-size',18)
                                         .attr("transform",
                                               "rotate(-90)")
                                         .attr('text-anchor','middle')

                                         svg_third.append('g')
                                           .append("path")
                                           .datum(data)
                                           .attr("class", "line")
                                           .style('stroke', "#e8a643")
                                           .attr("d", line_TX_2)
                                           // .transition()
                                           // .ease(d3.easeSin)
                                           // .duration(4000)
                                           // .style('stroke', "green")
                                           // .attr('stroke-width', 5);

                                           svg_third.append('g')
                                             .append("path")
                                             .datum(data)
                                             .attr("class", "line")
                                             .style('stroke', "#e3e843")
                                             .attr("d", line_CA_2)
                                             // .transition()
                                             // .ease(d3.easeSin)
                                             // .duration(4000)
                                             // .style('stroke', "green")
                                             // .attr('stroke-width', 5);

                                             svg_third.append('g')
                                               .append("path")
                                               .datum(data)
                                               .attr("class", "line")
                                               .style('stroke', "#1970d4")
                                               .attr("d", line_FL_2)
                                               // .transition()
                                               // .ease(d3.easeSin)
                                               // .duration(4000)
                                               // .style('stroke', "green")
                                               // .attr('stroke-width', 5);

                                               svg_third.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                 .attr('y',250)
                                                 .attr('x',-500)
                                                 .attr('class', 'legend_cases')
                                                 .text('California')
                                                 .attr("transform",
                                                       "rotate(-30)")


                                                 svg_third.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                 .attr('y',275)
                                                 .attr('x',-500)
                                                   .attr('class', 'legend_cases')
                                                   .text('Texas')
                                                   .attr("transform",
                                                         "rotate(-35)")

                                                         svg_third.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                         .attr('y',330)
                                                         .attr('x',-500)
                                                           .attr('class', 'legend_cases')
                                                           .text('Florida')
                                                           .attr("transform",
                                                                 "rotate(-35)")


                        //********************************fourth_scene********************************//


                        svg_fourth.append("g").attr("transform", "translate(0," + height + ")")
                           .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%m/%d")));



                         svg_fourth.append("g")
                           .call(d3.axisLeft(y).tickFormat(d3.format(".2s")));




                         svg_fourth.append('g').append("path")
                           .datum(data)
                           .attr("class", "line")
                           .attr("d", line_US)
                           .transition()
                           .ease(d3.easeSin)
                           .duration(4000)
                           .style('stroke', "red")
                           .attr('stroke-width', 5);





                                 svg_fourth.append('g')
                                   .append("path")
                                   .datum(data)
                                   .attr("class", "line")
                                   .style('stroke', "#736c72")
                                   .attr("d", line_Top5)
                                   // .transition()
                                   // .ease(d3.easeSin)
                                   // .duration(4000)
                                   // .style('stroke', "black")
                                   // .attr('stroke-width', 5);


                                   svg_fourth.append('g')
                                     .append("path")
                                     .datum(data)
                                     .attr("class", "line")
                                     .style('stroke', "#e8bc43")
                                     .attr("d", line_TX_FL_CA)
                                     // .transition()
                                     // .ease(d3.easeSin)
                                     // .duration(4000)
                                     // .style('stroke', "black")
                                     // .attr('stroke-width', 5);


                                     svg_fourth.append('g')
                                       .append("path")
                                       .datum(data)
                                       .attr("class", "line")
                                       .style('stroke', "#5e8c86")
                                       .attr("d", line_NY_NJ)
                                       // .transition()
                                       // .ease(d3.easeSin)
                                       // .duration(4000)
                                       // .style('stroke', "black")
                                       // .attr('stroke-width', 5);



                         svg_fourth.append('text')
                           .attr('y',-20)
                           .attr('x',50)
                           .attr('class', 'title')
                           .text('COVID-19 Cases Comparison: US vs Top 5 States')

                         svg_fourth.append('text')
                           .attr('y',-60)
                           .attr('x',-330)
                           .attr('class', 'title')
                           .text('COVID-19 Cases')
                           .style('font-size',18)
                           .attr("transform",
                                 "rotate(-90)")
                           .attr('text-anchor','middle')



                           svg_fourth.append('g').attr("transform", "translate("+width+",100)").append('text')
                             .attr('y',-22)
                             .attr('x',-150)
                             .attr('class', 'legend_cases')
                             .text('Cases in USA')
                             .attr("transform",
                                   "rotate(-45)")
                             .style('color','blue');

                             svg_fourth.append('g').attr("transform", "translate("+width+",0)").append('text')
                             .attr('y',355)
                             .attr('x',-370)
                               .attr('class', 'legend_cases')
                               .text('Top 5 States Combined')
                               .attr("transform",
                                     "rotate(-27)")


                               svg_fourth.append('g').attr("transform", "translate("+width+",0)").append('text')
                               .attr('y',568)
                               .attr('x',-370)
                                 .attr('class', 'legend_cases')
                                 .text('NY and NJ Combined')
                                 .attr("transform",
                                       "rotate(-1)")

                                       svg_fourth.append('g').attr("transform", "translate("+width+",0)").append('text')
                                       .attr('y',450)
                                       .attr('x',-380)
                                         .attr('class', 'legend_cases')
                                         .text('TX,CA,FL Combined')
                                         .attr("transform",
                                               "rotate(-25)")










  //********************************final_scene********************************//


                       svg_final.append("g").attr("transform", "translate(0," + height + ")")
                          .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%m/%d")));



                        svg_final.append("g")
                          .call(d3.axisLeft(y).tickFormat(d3.format(".2s")));





                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "red").attr("d", line_US).attr('id','USA').on("click",function(d){
                              var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                var active2   = NJ.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                  var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                    var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                      var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                        var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                          var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                            var active8   = NY.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                      d3.select("#Texas").style("opacity", newOpacity1);
                        d3.select("#TXlegend").style("opacity", newOpacity1);
                          TX_dot.style("opacity", newOpacity1);
                      d3.select("#NJ").style("opacity", newOpacity2);
                        d3.select("#NJlegend").style("opacity", newOpacity3);
                          NJ_dot.style("opacity", newOpacity2);
                      d3.select("#CA").style("opacity", newOpacity3);
                        d3.select("#CAlegend").style("opacity", newOpacity3);
                          CA_dot.style("opacity", newOpacity3);
                      d3.select("#FL").style("opacity", newOpacity4);
                        d3.select("#FLlegend").style("opacity", newOpacity4);
                          FL_dot.style("opacity", newOpacity4);
                      d3.select("#Top5").style("opacity", newOpacity5);
                        d3.select("#Top5legend").style("opacity", newOpacity5);
                          Top5_dot.style("opacity", newOpacity5);
                      d3.select("#TXFLCA").style("opacity", newOpacity6);
                        d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                          TXFLCA_dot.style("opacity", newOpacity6);
                      d3.select("#NYNJ").style("opacity", newOpacity7);
                        d3.select("#NYNJlegend").style("opacity", newOpacity7);
                          NYNJ_dot.style("opacity", newOpacity7);
                      d3.select("#NY").style("opacity", newOpacity8)
                        NY_dot.style("opacity", newOpacity8);
                        d3.select("#NYlegend").style("opacity", newOpacity8);


                      Texas.active1 = active1;
                      NJ.active2 = active2;
                      CA.active3 = active3;
                      FL.active4 = active4;
                      Top5.active5 = active5;
                      TXFLCA.active6 = active6;
                      NYNJ.active7 = active7,
                      USA.active8 = active8;



                                                  });

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#7ed5de").attr("d", line_NY).attr('id','NY').on("click",function(d){
                                    var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NJ.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#Texas").style("opacity", newOpacity1);
                              d3.select("#TXlegend").style("opacity", newOpacity1);
                                TX_dot.style("opacity", newOpacity1);
                            d3.select("#NJ").style("opacity", newOpacity2);
                              d3.select("#NJlegend").style("opacity", newOpacity3);
                                NJ_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);


                            Texas.active1 = active1;
                            NJ.active2 = active2;
                            CA.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;




                            });


                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#7edea1").attr("d", line_NJ).attr('id','NJ').on("click",function(d){
                                    var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#Texas").style("opacity", newOpacity1);
                              d3.select("#TXlegend").style("opacity", newOpacity1);
                                TX_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);



                            Texas.active1 = active1;
                            NJ.active2 = active2;
                            CA.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;



                                                  });

                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#e3e843").attr("d", line_CA).attr('id','CA').on("click",function(d){
                                    var active1   = Texas.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = NJ.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#Texas").style("opacity", newOpacity1);
                              d3.select("#TXlegend").style("opacity", newOpacity1);
                                TX_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity2);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#NJ").style("opacity", newOpacity3);
                              d3.select("#NJlegend").style("opacity", newOpacity3);
                                NJ_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);



                            Texas.active1 = active1;
                            NY.active2 = active2;
                            NJ.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;



                                                  });
                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#e8a643").attr("d", line_TX).attr('id','Texas').on("click",function(d){
                                    var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = FL.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#NJ").style("opacity", newOpacity1);
                              d3.select("#NJlegend").style("opacity", newOpacity1);
                                NJ_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#FL").style("opacity", newOpacity4);
                              d3.select("#FLlegend").style("opacity", newOpacity4);
                                FL_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);



                            NJ.active1 = active1;
                            NY.active2 = active2;
                            CA.active3 = active3;
                            FL.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;



                                                  });
                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#1970d4").attr("d", line_FL).attr('id','FL').on("click",function(d){
                                    var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#NJ").style("opacity", newOpacity1);
                              d3.select("#NJlegend").style("opacity", newOpacity1);
                                NJ_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#Texas").style("opacity", newOpacity4);
                              d3.select("#TXlegend").style("opacity", newOpacity4);
                                TX_dot.style("opacity", newOpacity4);
                            d3.select("#Top5").style("opacity", newOpacity5);
                              d3.select("#Top5legend").style("opacity", newOpacity5);
                                Top5_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);



                            NJ.active1 = active1;
                            NY.active2 = active2;
                            CA.active3 = active3;
                            Texas.active4 = active4;
                            Top5.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;



                                                  });
                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#736c72").attr("d", line_Top5).attr('id','Top5').on("click",function(d){
                                    var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                      var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                        var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                          var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                            var active5   = FL.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                              var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                                var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                                  var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                            d3.select("#NJ").style("opacity", newOpacity1);
                              d3.select("#NJlegend").style("opacity", newOpacity1);
                                NJ_dot.style("opacity", newOpacity1);
                            d3.select("#NY").style("opacity", newOpacity2);
                              d3.select("#NYlegend").style("opacity", newOpacity3);
                                NY_dot.style("opacity", newOpacity2);
                            d3.select("#CA").style("opacity", newOpacity3);
                              d3.select("#CAlegend").style("opacity", newOpacity3);
                                CA_dot.style("opacity", newOpacity3);
                            d3.select("#Texas").style("opacity", newOpacity4);
                              d3.select("#TXlegend").style("opacity", newOpacity4);
                                TX_dot.style("opacity", newOpacity4);
                            d3.select("#FL").style("opacity", newOpacity5);
                              d3.select("#FLlegend").style("opacity", newOpacity5);
                                FL_dot.style("opacity", newOpacity5);
                            d3.select("#TXFLCA").style("opacity", newOpacity6);
                              d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                                TXFLCA_dot.style("opacity", newOpacity6);
                            d3.select("#NYNJ").style("opacity", newOpacity7);
                              d3.select("#NYNJlegend").style("opacity", newOpacity7);
                                NYNJ_dot.style("opacity", newOpacity7);
                            d3.select("#USA").style("opacity", newOpacity8)
                              US_dot.style("opacity", newOpacity8);
                              d3.select("#USlegend").style("opacity", newOpacity8);



                            NJ.active1 = active1;
                            NY.active2 = active2;
                            CA.active3 = active3;
                            Texas.active4 = active4;
                            FL.active5 = active5;
                            TXFLCA.active6 = active6;
                            NYNJ.active7 = active7,
                            USA.active8 = active8;



                                                  });
                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#e8bc43").attr("d", line_TX_FL_CA).attr('id','TXFLCA').on("click",function(d){
                              var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                  var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                    var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                      var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                        var active6   = FL.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                          var active7   = NYNJ.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                            var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                      d3.select("#NJ").style("opacity", newOpacity1);
                        d3.select("#NJlegend").style("opacity", newOpacity1);
                          NJ_dot.style("opacity", newOpacity1);
                      d3.select("#NY").style("opacity", newOpacity2);
                        d3.select("#NYlegend").style("opacity", newOpacity3);
                          NY_dot.style("opacity", newOpacity2);
                      d3.select("#CA").style("opacity", newOpacity3);
                        d3.select("#CAlegend").style("opacity", newOpacity3);
                          CA_dot.style("opacity", newOpacity3);
                      d3.select("#Texas").style("opacity", newOpacity4);
                        d3.select("#TXlegend").style("opacity", newOpacity4);
                          TX_dot.style("opacity", newOpacity4);
                      d3.select("#Top5").style("opacity", newOpacity5);
                        d3.select("#Top5legend").style("opacity", newOpacity5);
                          Top5_dot.style("opacity", newOpacity5);
                      d3.select("#FL").style("opacity", newOpacity6);
                        d3.select("#FLlegend").style("opacity", newOpacity6);
                          FL_dot.style("opacity", newOpacity6);
                      d3.select("#NYNJ").style("opacity", newOpacity7);
                        d3.select("#NYNJlegend").style("opacity", newOpacity7);
                          NYNJ_dot.style("opacity", newOpacity7);
                      d3.select("#USA").style("opacity", newOpacity8)
                        US_dot.style("opacity", newOpacity8);
                        d3.select("#USlegend").style("opacity", newOpacity8);



                      NJ.active1 = active1;
                      NY.active2 = active2;
                      CA.active3 = active3;
                      Texas.active4 = active4;
                      Top5.active5 = active5;
                      FL.active6 = active6;
                      NYNJ.active7 = active7,
                      USA.active8 = active8;



                                            });


                            svg_final.append('g').append("path").datum(data).attr("class", "line").style('stroke', "#5e8c86").attr("d", line_NY_NJ).attr('id','NYNJ').on("click",function(d){
                                var active1   = NJ.active1 ? false : true, newOpacity1 = active1 ? 0 : 1;
                                var active2   = NY.active2 ? false : true, newOpacity2 = active1 ? 0 : 1;
                                  var active3   = CA.active3? false : true, newOpacity3 = active1 ? 0 : 1;
                                    var active4   = Texas.active4 ? false : true, newOpacity4 = active1 ? 0 : 1;
                                      var active5   = Top5.active5 ? false : true, newOpacity5 = active1 ? 0 : 1;
                                        var active6   = TXFLCA.active6 ? false : true, newOpacity6 = active1 ? 0 : 1;
                                          var active7   = FL.active7 ? false : true, newOpacity7 = active1 ? 0 : 1;
                                            var active8   = USA.active8 ? false : true, newOpacity8 = active1 ? 0 : 1;


                      d3.select("#NJ").style("opacity", newOpacity1);
                        d3.select("#NJlegend").style("opacity", newOpacity1);
                          NJ_dot.style("opacity", newOpacity1);
                      d3.select("#NY").style("opacity", newOpacity2);
                        d3.select("#NYlegend").style("opacity", newOpacity3);
                          NY_dot.style("opacity", newOpacity2);
                      d3.select("#CA").style("opacity", newOpacity3);
                        d3.select("#CAlegend").style("opacity", newOpacity3);
                          CA_dot.style("opacity", newOpacity3);
                      d3.select("#Texas").style("opacity", newOpacity4);
                        d3.select("#TXlegend").style("opacity", newOpacity4);
                          TX_dot.style("opacity", newOpacity4);
                      d3.select("#Top5").style("opacity", newOpacity5);
                        d3.select("#Top5legend").style("opacity", newOpacity5);
                          Top5_dot.style("opacity", newOpacity5);
                      d3.select("#TXFLCA").style("opacity", newOpacity6);
                        d3.select("#TXFLCAlegend").style("opacity", newOpacity6);
                          TXFLCA_dot.style("opacity", newOpacity6);
                      d3.select("#FL").style("opacity", newOpacity7);
                        d3.select("#FLlegend").style("opacity", newOpacity7);
                          FL_dot.style("opacity", newOpacity7);
                      d3.select("#USA").style("opacity", newOpacity8)
                        US_dot.style("opacity", newOpacity8);
                        d3.select("#USlegend").style("opacity", newOpacity8);



                      NJ.active1 = active1;
                      NY.active2 = active2;
                      CA.active3 = active3;
                      Texas.active4 = active4;
                      Top5.active5 = active5;
                      FL.active6 = active6;
                      NYNJ.active7 = active7,
                      USA.active8 = active8;



                                            });


            var tooltip=  svg_final.append('g').append('text').attr('y', (200)).attr('x', 500 ).attr('class', 'title').text('').style("opacity", 0).style('fill', 'grey')

            var US_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.US_cases) } )
            .attr("r",2).style("fill", "yellow").style("opacity", 1)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("US Cases:"+ d.US_cases)})
            .on("mousemove",function(d) {tooltip.text("US Cases: "+ d.US_cases)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)})




           var TX_dot=  svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.Texas_cases) } )
            .attr("r",2).style("fill", "black").style("opacity", 1)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("Texas:"+ d.Texas_cases)})
            .on("mousemove",function(d) {tooltip.text("Texas:"+ d.Texas_cases)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var CA_dot = svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.Cali_cases) } )
            .attr("r",2).style("fill", "red").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("California Cases:"+ d.Cali_cases)})
            .on("mousemove",function(d) {tooltip.text("California Cases: "+ d.Cali_cases)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var FL_dot = svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.Florida_cases) } )
            .attr("r",2).style("fill", "white").style("opacity", 1)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("Florida Cases:"+ d.Florida_cases)})
            .on("mousemove",function(d) {tooltip.text("Florida Cases: "+ d.Florida_cases)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var NY_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.NY_cases) } )
            .attr("r",2).style("fill", "red").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("New York Cases: "+ d.NY_cases)})
            .on("mousemove",function(d) {tooltip.text("New York Cases: "+ d.NY_cases)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var NJ_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.NJ_cases) } )
            .attr("r",2).style("fill", "red").style("opacity", 1)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("New Jersey Cases: "+ d.NJ_cases)})
            .on("mousemove",function(d) {tooltip.text("New Jersey Cases: "+ d.NJ_cases)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});


            var Top5_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.case_sum) } )
            .attr("r",2).style("fill", "white").style("opacity", 1)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("Top 5 states cases:"+ d.case_sum)})
            .on("mousemove",function(d) {tooltip.text("Top 5 states cases: "+ d.case_sum)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});

            var NYNJ_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.ny_nj) } )
            .attr("r",2).style("fill", "red").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("NY and NJ Combined:"+ d.ny_nj)})
            .on("mousemove",function(d) {tooltip.text("NY and NJ Combined: "+ d.ny_nj)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});

            var TXFLCA_dot=svg_final.append('g').selectAll('circle').data(data).enter().append('circle').attr("cx", function(d) { return x(d.date) } ).attr("cy", function(d) { return y(d.tx_flo_cali) } )
            .attr("r",2)
            // .attr("class", "dotstates")
            .style("fill", "blue").style("opacity", 0.5)
            .on("mouseover",function(d) {tooltip.style("opacity", 1).text("TX, FL , CA combined:"+ d.tx_flo_cali)})
            .on("mousemove",function(d) {tooltip.text("TX, FL , CA combined: "+ d.tx_flo_cali)} )
            .on("mouseleave", function(d) {tooltip.transition().duration(200).style("opacity", 0)});





                        svg_final.append('text')
                          .attr('y',-20)
                          .attr('x',50)
                          .attr('class', 'title')
                          .text('COVID-19 Cases Comparison: US vs Top 5 States')

                        svg_final.append('text')
                          .attr('y',-60)
                          .attr('x',-330)
                          .attr('class', 'title')
                          .text('COVID-19 Cases')
                          .style('font-size',18)
                          .attr("transform",
                                "rotate(-90)")
                          .attr('text-anchor','middle')



                          svg_final.append('g').attr("transform", "translate("+width+",100)").append('text')
                            .attr('y',-22)
                            .attr('x',-150)
                            .attr('id','USlegend')
                            .attr('class', 'legend_cases')
                            .text('Cases in USA')
                            .attr("transform",
                                  "rotate(-45)")
                            .style('color','blue');

                            svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                            .attr('y',355)
                            .attr('x',-370).attr('id','Top5legend')
                              .attr('class', 'legend_cases')
                              .text('Top 5 States Combined')
                              .attr("transform",
                                    "rotate(-27)")


                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                              .attr('y',568)
                              .attr('x',-370).attr('id','NYNJlegend')
                                .attr('class', 'legend_cases')
                                .text('NY and NJ Combined')
                                .attr("transform",
                                      "rotate(-1)")

                                      svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                      .attr('y',450)
                                      .attr('x',-380).attr('id','TXFLCAlegend')
                                        .attr('class', 'legend_cases')
                                        .text('TX,CA,FL Combined')
                                        .attr("transform",
                                              "rotate(-25)")


                                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                              .attr('y',618)
                                              .attr('x',-200).attr('id','CAlegend')
                                                .attr('class', 'legend_cases')
                                                .text('CA')
                                                .attr("transform",
                                                      "rotate(-3)")

                                                      svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                      .attr('y',590)
                                                      .attr('x',-200).attr('id','NYlegend')
                                                        .attr('class', 'legend_cases')
                                                        .text('NY')
                                                        .attr("transform",
                                                              "rotate(-3)")

                                                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                              .attr('y',650)
                                                              .attr('x',-200).attr('id','TXlegend')
                                                                .attr('class', 'legend_cases')
                                                                .text('TX')
                                                                .attr("transform",
                                                                      "rotate(-3)")

                                                                      svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                                      .attr('y',635)
                                                                      .attr('x',-330).attr('id','FLlegend')
                                                                        .attr('class', 'legend_cases')
                                                                        .text('FL')
                                                                        .attr("transform",
                                                                              "rotate(-3)")

                                                                              svg_final.append('g').attr("transform", "translate("+width+",0)").append('text')
                                                                              .attr('y',650)
                                                                              .attr('x',-50).attr('id','NJlegend')
                                                                                .attr('class', 'legend_cases')
                                                                                .text('NJ')
                                                                                .attr("transform",
                                                                                      "rotate(-3)")
                    
                    
                                                                                                                    const makeAnnotations1 = d3.annotation()
                                                                                                                           .type(d3.annotationLabel)
                                                                                                                           .annotations(annotations_US)

                                                                                                                         svg_final.append("g")
                                                                                                                           .attr("class", "annotation-group")
                                                                                                                           .call(makeAnnotations1)
                                                                                                                           .style("opacity",1)
})
</script>








<script>
document.getElementById("first_scene").style.display = "block";
function opentab(evt, tabname) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabname).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>

</body>
</html>
