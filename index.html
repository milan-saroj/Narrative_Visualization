<html>

<style type="text/css">
/* 13. Basic Styling with CSS */

/* Style the lines by removing the fill and applying a stroke */
.line {
    fill: none;
    stroke: #ffcccb;
    stroke-width: 2;
}
.line2 {
    fill: none;
    stroke: lightblue;
    stroke-width: 2;
}
.overlay {
  fill: none;
  pointer-events: all;
}

/* Style the dots by assigning a fill and stroke */
.dot {
    fill: #ffab00;
    stroke: #fff;
}

  .focus circle {
  fill: none;
  stroke: steelblue;
}

</style>


<script src='https://d3js.org/d3.v5.min.js'>  </script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
<svg width=1200 height=700>
</svg>
<script>
async function init() {

  const data = await d3.csv('https://raw.githubusercontent.com/milan-saroj/Narrative_Visualization/master/US_cases__.csv');

 //  var time_Format = d3.timeFormat("%m/%d/%y");
 // //  data.map(function(d){
 // //   d["date"] = timeFormat.parse(d["date"]);
 // //    return d;
 // // });


  var ys = d3.scaleLinear().domain([0,4000000]).range([300,0]);
  var xs = d3.scaleLinear().domain([0,190]).range([0,1000]);
  // var xs = d3.scaleTime().domain([time_Format(new Date(01/21/2020)), time_Format(new Date(01/21/2020))]).range([0,1000]);
  var line = d3.line()
    .x(function(d, i) { return xs(d.days); }) // set the x values for the line generator
    .y(function(d) { return ys(d.US_cases); }) // set the y values for the line generator
    .curve(d3.curveMonotoneX) // apply smoothing to the line

    var line2 = d3.line()
      .x(function(d, i) { return xs(d.days); }) // set the x values for the line generator
      .y(function(d) { return ys(d.US_death); }) // set the y values for the line generator
      .curve(d3.curveMonotoneX) // apply smoothing to the line

//For drawing circle at each datapoint
   // d3.select('svg')
   //   .append('g').attr('transform','translate(100,100)')
   //   .selectAll('circle').data(data).enter().append('circle')
   //   .attr('cx', function(d,i) {return xs(d.days);})
   //   // .attr('cx', function(d,i) {return xs(d.US_death);})
   //   .attr('cy', function(d,i) {return ys(d.US_cases);})
   //   .attr('r',0.025);


        d3.select('svg')
          .append('g').attr('transform','translate(100,100)').append("path")
        .datum(data)
        .attr("class", "line")
        .attr("d", line).transition()
        .ease(d3.easeSin)
        .duration(4000)
        .style('stroke', "red")
        .attr('stroke-width', 5);

        d3.select('svg')
          .append('g').attr('transform','translate(100,100)').append("path")
        .datum(data)
        .attr("class", "line2")
        .attr("d", line2)
        .transition()
        .ease(d3.easeSin)
        .duration(4000)
        .style('stroke', "blue")
        .attr('stroke-width', 5);


      

  d3.select("svg")
 .append("g").attr("transform","translate(100,100)").call(d3.axisLeft(ys).tickValues([1000000,2000000,3000000,4000000]).tickFormat(d3.format("")));



 d3.select("svg")
 .append("g").attr("transform","translate(100,400)").call(d3.axisBottom(xs).tickValues([10,20,30,40]).tickFormat(d3.format(""))); // d3.select("svg")
 // .append("g").attr("transform","translate(100,600)")
 // .call(d3.axisBottom(xs);


// var data = [4,8,15,16,23,42];
// var color = ['pink','lightyellow','lightgreen','lightcyan','lightblue','violet'];
// var pie = d3.pie();
// var arc = d3.arc().innerRadius(0).outerRadius(100);
// d3.select('svg').append('g').attr('transform', "translate(150,150)").selectAll('Path').data(pie(data)).enter().append('path')
// .attr('d',arc).attr('fill',function(d,i){return color[i];});


}
</script>
</body>
</html>
